---
title: Office 365 隔離與 Office 365 中的存取控制
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 摘要： 在 Office 365 的各種應用程式內的隔離及存取控制說明。
ms.openlocfilehash: 734c92a6f3185a25faf9aade1ba235444ed762da
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/23/2019
ms.locfileid: "30216853"
---
# <a name="isolation-and-access-control-in-office-365"></a><span data-ttu-id="6d36a-103">Office 365 中的隔離與存取控制</span><span class="sxs-lookup"><span data-stu-id="6d36a-103">Isolation and Access Control in Office 365</span></span>

<span data-ttu-id="6d36a-p101">Azure Active Directory 與 Office 365 使用高度複雜的資料模型包含數十萬服務、 數百個實體，數千的關係，以及數萬個屬性 （實體、 關係和屬性都是常特定應用程式）。在高層級、 Azure Active Directory 和服務目錄是租用戶和收件者的容器與他們會保留不同步使用狀態式複寫通訊協定。保留在 Azure Active Directory 中的目錄資訊，以及每個服務也有他們自己的目錄服務基礎結構 （例如 Exchange Online 的目錄服務、 SharePoint Online 的目錄服務、 等）。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p101">Azure Active Directory and Office 365 use a highly complex data model that includes tens of services, hundreds of entities, thousands of relationships, and tens of thousands of attributes (entities, relationships and attributes are often application-specific). At a high level, Azure Active Directory and the service directories are the containers of tenants and recipients, and they are kept in sync using state-based replication protocols. In addition to the directory information held within Azure Active Directory, each of the services also have their own directory services infrastructure (e.g., Exchange Online Directory Services, SharePoint Online Directory Services, etc.).</span></span> 
 
![Office 365 租用戶資料同步處理](media/office-365-isolation-tenant-data-sync.png)

<span data-ttu-id="6d36a-p102">在此模型中，有任何單一資料來源的目錄。每個個別資料的一部分擁有特定的系統，但沒有單一系統保留所有資料。Office 365 服務合作以了解資料模型的 Azure Active Directory。Azure Active Directory 是通常是通常由每個服務的小型和靜態資料的共用資料的 「 系統真偽"。使用 Office 365 和 Azure Active Directory 內的同盟的模型會提供共用的資料的檢視。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p102">Within this model, there is no single source of directory data. Every individual piece of data is owned by a specific system, but no single system holds all the data. Office 365 services cooperate with Azure Active Directory to realize the data model. Azure Active Directory is the "system of truth" for shared data, which is typically small and static data used often by every service. The federated model used within Office 365 and Azure Active Directory provides the shared view of the data.</span></span>

<span data-ttu-id="6d36a-p103">Office 365 使用實體儲存裝置與 Azure 雲端儲存。Exchange Online （包括 Exchange Online Protection） 和 Skype 的商務使用自己的存放區的客戶資料。SharePoint Online 如何運用其 SQL Server 儲存體與 Azure 存放區，而強制執行需要藉助的其他資料隔離的客戶儲存層級。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p103">Office 365 uses both physical storage and Azure cloud storage. Exchange Online (including Exchange Online Protection) and Skype for Business use their own storage for customer data. SharePoint Online leverages both its SQL Server storage and Azure storage, which necessitates the need for additional isolation of customer data at the storage level.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="6d36a-116">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="6d36a-116">Exchange Online</span></span>
<span data-ttu-id="6d36a-p104">Exchange Online 可儲存主控呼叫信箱資料庫的可延伸儲存引擎 (ESE) 資料庫中的信箱內的客戶資料。這包括使用者信箱、 連結的信箱、 共用的信箱和公用資料夾信箱。使用者信箱可能也會包含已儲存的 Skype 商務內容，例如交談歷程記錄。使用者信箱的內容包括電子郵件和電子郵件附件、 行事曆及空閒/忙碌資訊、 連絡人、 工作、 備忘稿、 群組及推斷資料。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p104">Exchange Online stores customer data within mailboxes that are hosted within Extensible Storage Engine (ESE) databases called mailbox databases. This includes user mailboxes, linked mailboxes, shared mailboxes and public folder mailboxes. User mailboxes may also include saved Skype for Business content, such as conversation histories. User mailbox content includes emails and email attachments, calendaring and free/busy information, contacts, tasks, notes, Groups, and inference data.</span></span>

<span data-ttu-id="6d36a-p105">在 Exchange Online 中的每個信箱資料庫包含多個承租人的信箱。授權程式碼、 租用中包括保護所有的信箱。為 Exchange 內部部署預設指派的使用者才會擁有存取信箱。保護信箱的存取控制清單 (ACL) 包含驗證租用戶層級的 Azure Active Directory 的身分識別。限制識別驗證對該用戶驗證提供者，其中包括從該租用戶的唯一使用者是指定承租人的信箱。屬於 TenantA 的內容不能以任何方法可取得使用者 TenantB，除非明確核准 TenantA。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p105">Each mailbox database within Exchange Online contains mailboxes from multiple tenants. All mailboxes are secured by authorization code, including within a tenancy. As with an on-premises deployment of Exchange, by default only the assigned user has access to a mailbox. The access control list (ACL) that secures a mailbox contains an identity that is authenticated by Azure Active Directory at the tenant level. The mailboxes for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant. Content belonging to TenantA cannot in any way be obtained by users in TenantB, unless explicitly approved by TenantA.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="6d36a-127">商務用 Skype</span><span class="sxs-lookup"><span data-stu-id="6d36a-127">Skype for Business</span></span>
<span data-ttu-id="6d36a-128">適用於企業的 Skype 將資料儲存各種位置：</span><span class="sxs-lookup"><span data-stu-id="6d36a-128">Skype for Business stores data in a variety of places:</span></span>
- <span data-ttu-id="6d36a-p106">在商務 Active Directory 伺服器 Skype 以及各種 Skype 商務資料庫中儲存使用者與帳戶資訊，其中包含連線的端點租用戶識別碼、 撥號對應表、 漫遊設定、 目前狀態、 連絡人清單、 等伺服器。如果使用者已啟用這兩個產品，或在 Skype 商務伺服器如果使用者不是連絡人清單儲存在使用者的 Exchange Online 信箱。Skype 商務資料庫伺服器的已分割每位租用戶，但資料的多重租用隔離透過 RBAC 強制執行。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p106">User and account information, which includes connection endpoints, tenant IDs, dial plans, roaming settings, presence state, contact lists, etc., is stored in the Skype for Business Active Directory servers, as well as in various Skype for Business database servers. Contact lists are stored in the user's Exchange Online mailbox if the user is enabled for both products, or on Skype for Business servers if the user is not. Skype for Business database servers are not partitioned per-tenant, but multi-tenancy isolation of data is enforced through RBAC.</span></span>
- <span data-ttu-id="6d36a-p107">會議內容，例如商務會議內容的使用者上傳 Skype 期間會儲存在分散式檔案系統共用。也可以將此內容封存 Exchange Online 中，提供啟用封存。DFS 共用不是已分割的每個承租人但與 Acl 保護內容的安全與多重租用透過 RBAC 強制執行。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p107">Meeting content, such as content users upload during Skype for Business meetings, is stored on Distributed File System shares. This content can also be archived in Exchange Online provided archiving is enabled. The DFS shares are not partitioned per-tenant but the content is secured with ACLs and multi-tenancy is enforced through RBAC.</span></span>
- <span data-ttu-id="6d36a-p108">詳細通話記錄，這是活動歷程記錄，例如來電記錄、 IM 工作階段、 應用程式共用、 IM 歷程記錄等，也可以儲存在 Exchange Online 中，但是大部分詳細通話記錄會暫時儲存在通話詳細記錄 (CDR) 伺服器上。每位租用戶、 未分割的內容，但多重租用透過 RBAC 強制執行。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p108">Call detail records, which is the activity history, such as call history, IM sessions, application sharing, IM history, etc., can also be stored in Exchange Online, but most call detail records are temporarily stored on call detail record (CDR) servers. Content is not partitioned per tenant, but multi-tenancy is enforced through RBAC.</span></span>

## <a name="sharepoint-online"></a><span data-ttu-id="6d36a-137">SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="6d36a-137">SharePoint Online</span></span>
<span data-ttu-id="6d36a-p109">有數個獨立的機制唯一 to SharePoint Online 提供資料隔離。SharePoint Online 為抽象應用程式資料庫中的程式碼儲存物件。例如，當使用者上傳至 SharePoint Online 檔案，該檔案是反組譯轉譯成應用程式碼與跨多個資料庫儲存在多個資料表中。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p109">There are several independent mechanisms unique to SharePoint Online that provide data isolation. SharePoint Online stores objects as abstracted code within application databases. For example, when a user uploads a file to SharePoint Online, that file is disassembled and translated into application code and stored in multiple tables across multiple databases.</span></span>

<span data-ttu-id="6d36a-p110">如果使用者無法直接存取含有資料的存放區，就無法解譯人力資源或 SharePoint Online 以外的任何系統內容。這些機制包括安全性存取控制及屬性。如前文所述，授權程式碼及租用內包含的 RBAC 原則所保護所有 SharePoint Online 的資源。保護資源的存取控制清單 (ACL) 包含租用戶層級驗證身分識別。與 Exchange Online、 SharePoint Online 中指定承租人的資料限於對該用戶驗證提供者驗證識別身分包括該承租人的唯一使用者。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p110">If a user could gain direct access to the storage containing the data, the content would not be interpretable to a human or any system other than SharePoint Online. These mechanisms include security access control and properties. As described above, all SharePoint Online resources are secured by the authorization code and RBAC policy, including within a tenancy. The access control list (ACL) that secures a resource contains an identity that is authenticated at the tenant level. As with Exchange Online, in SharePoint Online, data for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant.</span></span>

<span data-ttu-id="6d36a-p111">除了 Acl、 指定驗證提供者 （這是承租人特定 Azure Active Directory） 的租用戶層級屬性一次寫入，而且無法一次設定變更。驗證提供者租用戶屬性已設定租用戶之後, 就無法變更使用公開給租用戶任何 Api。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p111">In addition to the ACLs, a tenant level property that specifies the authentication provider (which is the tenant-specific Azure Active Directory), is written once and cannot be changed once set. Once the authentication provider tenant property has been set for a tenant, it cannot be changed using any APIs exposed to a tenant.</span></span>

<span data-ttu-id="6d36a-p112">唯一*SubscriptionId*也用於每個租用戶。客戶的所有網站擁有的租用戶和*SubscriptionId*唯一指派給租用戶。在網站上的*SubscriptionId*屬性會寫入一次，且無法變更。一旦站台已指派給租用戶，它不能移至不同的租用戶稍後使用的內容儲存區 API。*SubscriptionId*也是用來建立驗證提供者安全性範圍並已繫結至租用戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p112">A unique *SubscriptionId* is also used for each tenant. All customer sites are owned by a tenant and are assigned a *SubscriptionId* unique to the tenant. The *SubscriptionId* property on a site is written once and cannot be changed. Once a site is assigned to a tenant, it cannot be moved to a different tenant later using the content store API. The *SubscriptionId* is also the key that is used to create the security scope for the authentication provider and is tied to the tenant.</span></span>

<span data-ttu-id="6d36a-p113">SharePoint Online 的內容儲存使用 SQL Server 與 Azure 儲存空間。在 SQL 層級的內容存放區的分割區金鑰*SiteId*。當執行 SQL 查詢，SharePoint Online 使用已經過驗證*SiteId*租用戶層級*SubscriptionId* ] 核取的一部分。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p113">SharePoint Online uses SQL Server and Azure storage for the storing of content. At the SQL level, the partition key for the content store is *SiteId*. When running a SQL query, SharePoint Online uses a *SiteId* that has been verified as part of a tenant-level *SubscriptionId* check.</span></span>

<span data-ttu-id="6d36a-p114">SharePoint Online in Microsoft Azure 儲存檔案二進位 blob （例如檔案資料流）。每個 SharePoint Online 的伺服器陣列有其本身的 Microsoft Azure 帳戶和個別使用儲存在 SQL 內容存放區中的機碼加密儲存在 Azure 中的所有 blob 存。加密金鑰不會公開給使用者，直接與程式碼中的授權層會受到保護。最後，SharePoint Online 已備妥来偵測的 HTTP 要求都可讀取或寫入資料的多個用戶時的即時監視。其執行方法追蹤對*SubscriptionId*所存取的資源要求 identity *SubscriptionId* 。存取多個承租人的資源要求不應該發生的使用者。它可以上述發生在多承租人環境中的服務要求。例如，搜尋編目程式提取整個資料庫的內容變更一次。這通常會查詢中完成的效率原因的單一服務要求的多個承租人的網站。</span><span class="sxs-lookup"><span data-stu-id="6d36a-p114">SharePoint Online stores file binary blobs (e.g., the file streams) in Microsoft Azure. Each SharePoint Online farm has its own Microsoft Azure account and all the blobs saved in Azure are encrypted individually using a key that is stored in the SQL content store. The encryption key is not exposed directly to the end user, and is protected in code by the authorization layer. Finally, SharePoint Online has real-time monitoring in place to detect when an HTTP request reads or writes data for more than one tenant. It does this by tracking the *SubscriptionId* of the request identity against the *SubscriptionId* of the resource being accessed. A request accessing resources of more than one tenant should never happen by end-user. It can happen for service requests in a multi-tenant environment, though. For example, the search crawler pulls content changes for an entire database all at once. This usually involves querying sites of more than one tenant in a single service request, which is done for efficiency reasons.</span></span>
