---
title: Office 365 隔離和 Office 365 中的存取控制
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 摘要： 在 Office 365 的各種應用程式內的隔離和存取控制的說明。
ms.openlocfilehash: c4328539f8cca5cb7e76c4a3175cfab0a01b42cf
ms.sourcegitcommit: 0017dc6a5f81c165d9dfd88be39a6bb17856582e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/23/2019
ms.locfileid: "32262618"
---
# <a name="isolation-and-access-control-in-office-365"></a><span data-ttu-id="b9929-103">Office 365 中的隔離與存取控制</span><span class="sxs-lookup"><span data-stu-id="b9929-103">Isolation and Access Control in Office 365</span></span>

<span data-ttu-id="b9929-104">Azure Active Directory 和 Office 365 使用高度複雜的資料模型，其中包含數萬個服務，數百個實體，千分位的關聯性和數萬個屬性 （實體、 關係和屬性都通常特定應用程式）。</span><span class="sxs-lookup"><span data-stu-id="b9929-104">Azure Active Directory and Office 365 use a highly complex data model that includes tens of services, hundreds of entities, thousands of relationships, and tens of thousands of attributes (entities, relationships and attributes are often application-specific).</span></span> <span data-ttu-id="b9929-105">在高的層級，Azure Active Directory 服務目錄的租用戶和收件者] 容器，且他們會保持同步處理使用狀態為基礎的複寫通訊協定。</span><span class="sxs-lookup"><span data-stu-id="b9929-105">At a high level, Azure Active Directory and the service directories are the containers of tenants and recipients, and they are kept in sync using state-based replication protocols.</span></span> <span data-ttu-id="b9929-106">除了 Azure Active Directory 內保留的目錄資訊，每個服務也會有自己的目錄服務基礎結構 （例如，Exchange Online 的目錄服務、 SharePoint Online Directory Services 等）。</span><span class="sxs-lookup"><span data-stu-id="b9929-106">In addition to the directory information held within Azure Active Directory, each of the services also have their own directory services infrastructure (e.g., Exchange Online Directory Services, SharePoint Online Directory Services, etc.).</span></span> 
 
![Office 365 租用戶資料同步處理](media/office-365-isolation-tenant-data-sync.png)

<span data-ttu-id="b9929-108">此模型內沒有任何單一資料來源的目錄。</span><span class="sxs-lookup"><span data-stu-id="b9929-108">Within this model, there is no single source of directory data.</span></span> <span data-ttu-id="b9929-109">每個個別的一段資料擁有特定系統使用，但沒有單一系統保留的所有資料。</span><span class="sxs-lookup"><span data-stu-id="b9929-109">Every individual piece of data is owned by a specific system, but no single system holds all the data.</span></span> <span data-ttu-id="b9929-110">Office 365 服務互相合作與 Azure Active Directory 来實現資料模型。</span><span class="sxs-lookup"><span data-stu-id="b9929-110">Office 365 services cooperate with Azure Active Directory to realize the data model.</span></span> <span data-ttu-id="b9929-111">Azure Active Directory 是 」 的系統真偽 」 通常是通常每個服務所使用的小型和靜態資料的共用資料。</span><span class="sxs-lookup"><span data-stu-id="b9929-111">Azure Active Directory is the "system of truth" for shared data, which is typically small and static data used often by every service.</span></span> <span data-ttu-id="b9929-112">使用 Office 365 和 Azure Active Directory 中的同盟的模型提供資料的共用] 檢視。</span><span class="sxs-lookup"><span data-stu-id="b9929-112">The federated model used within Office 365 and Azure Active Directory provides the shared view of the data.</span></span>

<span data-ttu-id="b9929-113">Office 365 使用實體儲存裝置和 Azure 雲端儲存空間。</span><span class="sxs-lookup"><span data-stu-id="b9929-113">Office 365 uses both physical storage and Azure cloud storage.</span></span> <span data-ttu-id="b9929-114">Exchange Online （包括 Exchange Online Protection） 和商務用 Skype 使用自己的儲存體的客戶資料。</span><span class="sxs-lookup"><span data-stu-id="b9929-114">Exchange Online (including Exchange Online Protection) and Skype for Business use their own storage for customer data.</span></span> <span data-ttu-id="b9929-115">SharePoint Online 會運用其 SQL Server 儲存與 Azure 儲存體，區間儲存層級的客戶資料的額外隔離的需要。</span><span class="sxs-lookup"><span data-stu-id="b9929-115">SharePoint Online leverages both its SQL Server storage and Azure storage, which necessitates the need for additional isolation of customer data at the storage level.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="b9929-116">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="b9929-116">Exchange Online</span></span>
<span data-ttu-id="b9929-117">Exchange Online 儲存名為的信箱資料庫的可延伸儲存引擎 (ESE) 資料庫中裝載的信箱內的客戶資料。</span><span class="sxs-lookup"><span data-stu-id="b9929-117">Exchange Online stores customer data within mailboxes that are hosted within Extensible Storage Engine (ESE) databases called mailbox databases.</span></span> <span data-ttu-id="b9929-118">這包括使用者信箱、 連結的信箱、 共用的信箱和公用資料夾信箱。</span><span class="sxs-lookup"><span data-stu-id="b9929-118">This includes user mailboxes, linked mailboxes, shared mailboxes and public folder mailboxes.</span></span> <span data-ttu-id="b9929-119">使用者信箱也可能會包含已儲存的 Skype for Business 內容，例如交談歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="b9929-119">User mailboxes may also include saved Skype for Business content, such as conversation histories.</span></span> <span data-ttu-id="b9929-120">使用者信箱的內容包含電子郵件和電子郵件附件、 行事曆及空閒/忙碌資訊、 連絡人、 工作、 記事、 群組和推斷資料。</span><span class="sxs-lookup"><span data-stu-id="b9929-120">User mailbox content includes emails and email attachments, calendaring and free/busy information, contacts, tasks, notes, Groups, and inference data.</span></span>

<span data-ttu-id="b9929-121">在 Exchange Online 內每個信箱資料庫包含多個承租人的信箱。</span><span class="sxs-lookup"><span data-stu-id="b9929-121">Each mailbox database within Exchange Online contains mailboxes from multiple tenants.</span></span> <span data-ttu-id="b9929-122">所有信箱都受到授權程式碼，包括在租用戶內。</span><span class="sxs-lookup"><span data-stu-id="b9929-122">All mailboxes are secured by authorization code, including within a tenancy.</span></span> <span data-ttu-id="b9929-123">做為內部部署的 Exchange，預設只指派的使用者已存取至信箱。</span><span class="sxs-lookup"><span data-stu-id="b9929-123">As with an on-premises deployment of Exchange, by default only the assigned user has access to a mailbox.</span></span> <span data-ttu-id="b9929-124">保護信箱的存取控制清單 (ACL) 包含由 Azure Active Directory 租用戶層級驗證身分識別。</span><span class="sxs-lookup"><span data-stu-id="b9929-124">The access control list (ACL) that secures a mailbox contains an identity that is authenticated by Azure Active Directory at the tenant level.</span></span> <span data-ttu-id="b9929-125">指定租用戶的信箱會受限於的身分識別驗證依據該租用戶的驗證提供者，其中包含從該租用戶的唯一使用者。</span><span class="sxs-lookup"><span data-stu-id="b9929-125">The mailboxes for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant.</span></span> <span data-ttu-id="b9929-126">內容屬於 TenantA 無法以任何方式取得 TenantB 中, 使用者所除非明確 TenantA 經過核准。</span><span class="sxs-lookup"><span data-stu-id="b9929-126">Content belonging to TenantA cannot in any way be obtained by users in TenantB, unless explicitly approved by TenantA.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="b9929-127">商務用 Skype</span><span class="sxs-lookup"><span data-stu-id="b9929-127">Skype for Business</span></span>
<span data-ttu-id="b9929-128">商務用 Skype 會將資料儲存在各種不同的位置：</span><span class="sxs-lookup"><span data-stu-id="b9929-128">Skype for Business stores data in a variety of places:</span></span>
- <span data-ttu-id="b9929-129">使用者與帳戶資訊，其中包含連線端點，租用戶識別碼，撥號對應表，漫遊設定、 目前狀態、 連絡人清單等等，會儲存在 Skype for Business Active Directory 伺服器，以及各種 skype for Business 資料庫一部伺服器。</span><span class="sxs-lookup"><span data-stu-id="b9929-129">User and account information, which includes connection endpoints, tenant IDs, dial plans, roaming settings, presence state, contact lists, etc., is stored in the Skype for Business Active Directory servers, as well as in various Skype for Business database servers.</span></span> <span data-ttu-id="b9929-130">如果已對使用者啟用兩項產品，或在 Skype 商務伺服器如果使用者不是連絡人清單儲存在使用者的 Exchange Online 信箱。</span><span class="sxs-lookup"><span data-stu-id="b9929-130">Contact lists are stored in the user's Exchange Online mailbox if the user is enabled for both products, or on Skype for Business servers if the user is not.</span></span> <span data-ttu-id="b9929-131">Skype 商務資料庫伺服器不是分割每位租用戶，但透過 RBAC 強制執行多重租用隔離的資料。</span><span class="sxs-lookup"><span data-stu-id="b9929-131">Skype for Business database servers are not partitioned per-tenant, but multi-tenancy isolation of data is enforced through RBAC.</span></span>
- <span data-ttu-id="b9929-132">會議內容，例如商務會議內容的使用者上傳期間 Skype 會儲存在分散式檔案系統的共用。</span><span class="sxs-lookup"><span data-stu-id="b9929-132">Meeting content, such as content users upload during Skype for Business meetings, is stored on Distributed File System shares.</span></span> <span data-ttu-id="b9929-133">也可以將此內容封存在 Exchange Online 中，提供啟用封存。</span><span class="sxs-lookup"><span data-stu-id="b9929-133">This content can also be archived in Exchange Online provided archiving is enabled.</span></span> <span data-ttu-id="b9929-134">DFS 共用分割每個租用戶，但使用 Acl 保護內容的安全且多重租用透過 RBAC 強制執行。</span><span class="sxs-lookup"><span data-stu-id="b9929-134">The DFS shares are not partitioned per-tenant but the content is secured with ACLs and multi-tenancy is enforced through RBAC.</span></span>
- <span data-ttu-id="b9929-135">詳細通話記錄，也就是活動歷程記錄，例如通話記錄、 IM 工作階段、 應用程式共用、 IM 歷程記錄等等，也可以儲存在 Exchange Online 中，但是大部分的通話詳細記錄會暫時儲存通話詳細記錄 (CDR) 伺服器上。</span><span class="sxs-lookup"><span data-stu-id="b9929-135">Call detail records, which is the activity history, such as call history, IM sessions, application sharing, IM history, etc., can also be stored in Exchange Online, but most call detail records are temporarily stored on call detail record (CDR) servers.</span></span> <span data-ttu-id="b9929-136">每個租用戶，未分割的內容，但多重租用透過 RBAC 強制執行。</span><span class="sxs-lookup"><span data-stu-id="b9929-136">Content is not partitioned per tenant, but multi-tenancy is enforced through RBAC.</span></span>

## <a name="sharepoint-online"></a><span data-ttu-id="b9929-137">SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="b9929-137">SharePoint Online</span></span>
<span data-ttu-id="b9929-138">有唯一的 SharePoint Online 提供資料隔離的幾個獨立的機制。</span><span class="sxs-lookup"><span data-stu-id="b9929-138">There are several independent mechanisms unique to SharePoint Online that provide data isolation.</span></span> <span data-ttu-id="b9929-139">SharePoint Online 會將物件儲存為抽象應用程式資料庫中的程式碼。</span><span class="sxs-lookup"><span data-stu-id="b9929-139">SharePoint Online stores objects as abstracted code within application databases.</span></span> <span data-ttu-id="b9929-140">例如，當使用者將檔案上傳至 SharePoint Online，該檔案是反組譯轉譯成應用程式程式碼和多個資料庫儲存在多個資料表中。</span><span class="sxs-lookup"><span data-stu-id="b9929-140">For example, when a user uploads a file to SharePoint Online, that file is disassembled and translated into application code and stored in multiple tables across multiple databases.</span></span>

<span data-ttu-id="b9929-141">如果使用者無法直接存取其中包含的資料儲存區，不會解譯 human 或 SharePoint Online 以外的任何系統的內容。</span><span class="sxs-lookup"><span data-stu-id="b9929-141">If a user could gain direct access to the storage containing the data, the content would not be interpretable to a human or any system other than SharePoint Online.</span></span> <span data-ttu-id="b9929-142">這些機制包括安全性存取控制和屬性。</span><span class="sxs-lookup"><span data-stu-id="b9929-142">These mechanisms include security access control and properties.</span></span> <span data-ttu-id="b9929-143">如前所述，SharePoint Online 的所有資源都受到租用戶內包含的 RBAC 原則與授權程式碼。</span><span class="sxs-lookup"><span data-stu-id="b9929-143">As described above, all SharePoint Online resources are secured by the authorization code and RBAC policy, including within a tenancy.</span></span> <span data-ttu-id="b9929-144">保護資源的存取控制清單 (ACL) 包含在租用戶層級驗證身分識別。</span><span class="sxs-lookup"><span data-stu-id="b9929-144">The access control list (ACL) that secures a resource contains an identity that is authenticated at the tenant level.</span></span> <span data-ttu-id="b9929-145">如同 Exchange Online 中，在 SharePoint Online 中，指定租用戶資料僅限於的身分識別驗證依據該租用戶的驗證提供者，其中包含從該租用戶的唯一使用者。</span><span class="sxs-lookup"><span data-stu-id="b9929-145">As with Exchange Online, in SharePoint Online, data for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant.</span></span>

<span data-ttu-id="b9929-146">除了 Acl，租用戶層級屬性，指定驗證提供者 （也就是租用戶特定的 Azure Active Directory），一次撰寫，且無法一次設定變更。</span><span class="sxs-lookup"><span data-stu-id="b9929-146">In addition to the ACLs, a tenant level property that specifies the authentication provider (which is the tenant-specific Azure Active Directory), is written once and cannot be changed once set.</span></span> <span data-ttu-id="b9929-147">一旦針對租用戶設定 [驗證提供者] 租用戶屬性，就無法變更使用公開給租用戶的任何 Api。</span><span class="sxs-lookup"><span data-stu-id="b9929-147">Once the authentication provider tenant property has been set for a tenant, it cannot be changed using any APIs exposed to a tenant.</span></span>

<span data-ttu-id="b9929-148">唯一*SubscriptionId*也可用於每個租用戶。</span><span class="sxs-lookup"><span data-stu-id="b9929-148">A unique *SubscriptionId* is also used for each tenant.</span></span> <span data-ttu-id="b9929-149">客戶的所有網站擁有的租用戶，並指派*SubscriptionId*唯一至租用戶。</span><span class="sxs-lookup"><span data-stu-id="b9929-149">All customer sites are owned by a tenant and are assigned a *SubscriptionId* unique to the tenant.</span></span> <span data-ttu-id="b9929-150">在網站上的*SubscriptionId*屬性寫入一次，且無法變更。</span><span class="sxs-lookup"><span data-stu-id="b9929-150">The *SubscriptionId* property on a site is written once and cannot be changed.</span></span> <span data-ttu-id="b9929-151">一旦網站指派給租用戶，它無法移至不同的租用戶，稍後再使用的內容儲存區 API。</span><span class="sxs-lookup"><span data-stu-id="b9929-151">Once a site is assigned to a tenant, it cannot be moved to a different tenant later using the content store API.</span></span> <span data-ttu-id="b9929-152">*SubscriptionId*也是用來建立驗證提供者的安全性範圍和繫結至租用戶的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="b9929-152">The *SubscriptionId* is also the key that is used to create the security scope for the authentication provider and is tied to the tenant.</span></span>

<span data-ttu-id="b9929-153">SharePoint Online 會使用 SQL Server 和 Azure 儲存體來儲存內容。</span><span class="sxs-lookup"><span data-stu-id="b9929-153">SharePoint Online uses SQL Server and Azure storage for the storing of content.</span></span> <span data-ttu-id="b9929-154">在 SQL 層級，內容存放區的磁碟分割索引鍵是*SiteId*。</span><span class="sxs-lookup"><span data-stu-id="b9929-154">At the SQL level, the partition key for the content store is *SiteId*.</span></span> <span data-ttu-id="b9929-155">當執行 SQL 查詢，SharePoint Online 使用已經驗證*SiteId*做為租用戶層級*SubscriptionId*檢查的一部分。</span><span class="sxs-lookup"><span data-stu-id="b9929-155">When running a SQL query, SharePoint Online uses a *SiteId* that has been verified as part of a tenant-level *SubscriptionId* check.</span></span>

<span data-ttu-id="b9929-156">SharePoint Online 在 Microsoft Azure 中儲存檔案二進位 blob （例如，檔案資料流）。</span><span class="sxs-lookup"><span data-stu-id="b9929-156">SharePoint Online stores file binary blobs (e.g., the file streams) in Microsoft Azure.</span></span> <span data-ttu-id="b9929-157">每個 SharePoint Online 的伺服器陣列有它自己的 Microsoft Azure 帳戶，並儲存在 Azure 中的所有 blob 存加密個別使用儲存在 SQL 內容存放區中的機碼。</span><span class="sxs-lookup"><span data-stu-id="b9929-157">Each SharePoint Online farm has its own Microsoft Azure account and all the blobs saved in Azure are encrypted individually using a key that is stored in the SQL content store.</span></span> <span data-ttu-id="b9929-158">加密金鑰不會公開直接給一般使用者而言，而且在程式碼中受到授權層。</span><span class="sxs-lookup"><span data-stu-id="b9929-158">The encryption key is not exposed directly to the end user, and is protected in code by the authorization layer.</span></span> <span data-ttu-id="b9929-159">最後，SharePoint Online 已準備就緒可以偵測時的 HTTP 要求會讀取或寫入的多個承租人資料的即時監視。</span><span class="sxs-lookup"><span data-stu-id="b9929-159">Finally, SharePoint Online has real-time monitoring in place to detect when an HTTP request reads or writes data for more than one tenant.</span></span> <span data-ttu-id="b9929-160">它會追蹤*SubscriptionId*針對*SubscriptionId*所存取的資源要求身分識別。</span><span class="sxs-lookup"><span data-stu-id="b9929-160">It does this by tracking the *SubscriptionId* of the request identity against the *SubscriptionId* of the resource being accessed.</span></span> <span data-ttu-id="b9929-161">存取多個租用戶的資源要求不應該發生的使用者。</span><span class="sxs-lookup"><span data-stu-id="b9929-161">A request accessing resources of more than one tenant should never happen by end-user.</span></span> <span data-ttu-id="b9929-162">它可以雖然發生在多承租人環境中，服務要求。</span><span class="sxs-lookup"><span data-stu-id="b9929-162">It can happen for service requests in a multi-tenant environment, though.</span></span> <span data-ttu-id="b9929-163">例如，搜尋編目程式會一次提取整個資料庫的內容變更。</span><span class="sxs-lookup"><span data-stu-id="b9929-163">For example, the search crawler pulls content changes for an entire database all at once.</span></span> <span data-ttu-id="b9929-164">這通常是牽涉到查詢中的單一服務要求，為了效率原因的多個租用戶的網站。</span><span class="sxs-lookup"><span data-stu-id="b9929-164">This usually involves querying sites of more than one tenant in a single service request, which is done for efficiency reasons.</span></span>
