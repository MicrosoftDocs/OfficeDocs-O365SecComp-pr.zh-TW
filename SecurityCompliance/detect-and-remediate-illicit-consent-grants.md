---
title: 偵測並修復 Office 365 中的非法同意授權
ms.author: chrfox
author: chrfox
manager: laurawi
ms.date: 4/23/2018
ms.audience: ITPro
ms.topic: article
ms.collection:
- o365_security_incident_response
- M365-security-compliance
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
description: 了解如何識別並修復 Office 365 中的非法同意授權攻擊。
ms.openlocfilehash: 32fa8fedd0cac0ba1a6193b7b107492efb136838
ms.sourcegitcommit: e7a776a04ef6ed5e287a33cfdc36aa2d72862b55
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/29/2019
ms.locfileid: "30999936"
---
# <a name="detect-and-remediate-illicit-consent-grants-in-office-365"></a><span data-ttu-id="19cb4-103">偵測並修復 Office 365 中的非法同意授權</span><span class="sxs-lookup"><span data-stu-id="19cb4-103">Detect and Remediate Illicit Consent Grants in Office 365</span></span>

<span data-ttu-id="19cb4-104">**摘要** 了解如何識別並修復 Office 365 中的非法同意授權攻擊。</span><span class="sxs-lookup"><span data-stu-id="19cb4-104">**Summary**  Learn how to recognize and remediate the illicit consent grants attack in Office 365.</span></span>

## <a name="what-is-the-illicit-consent-grant-attack-in-office-365"></a><span data-ttu-id="19cb4-105">什麼是 Office 365 中的非法同意授與攻擊？</span><span class="sxs-lookup"><span data-stu-id="19cb4-105">What is the illicit consent grant attack in Office 365?</span></span>
<span data-ttu-id="19cb4-106">非法同意授權攻擊，攻擊者就會建立 Azure 註冊的應用程式要求存取資料，例如連絡人的資訊，電子郵件，或文件。</span><span class="sxs-lookup"><span data-stu-id="19cb4-106">In an illicit consent grant attack, the attacker creates an Azure-registered application that requests access to data such as contact information, email, or documents.</span></span> <span data-ttu-id="19cb4-107">攻擊者然後技巧到授與該應用程式同意才能透過網路釣魚攻擊，或將插入的受信任的網站，以便非法程式碼來存取其資料的使用者。</span><span class="sxs-lookup"><span data-stu-id="19cb4-107">The attacker then tricks an end user into granting that application consent to access their data either through a phishing attack, or by injecting illicit code into a trusted website.</span></span> <span data-ttu-id="19cb4-108">非法應用程式授與同意之後，它會有不需組織帳戶進行資料存取帳戶層級。</span><span class="sxs-lookup"><span data-stu-id="19cb4-108">After the illicit application has been granted consent, it has account-level access to data without the need for an organizational account.</span></span> <span data-ttu-id="19cb4-109">一般的補救步驟，例如重設受到破壞帳戶的密碼或帳戶，需要多重要素驗證 (MFA) 不對此類的攻擊，有效，因為這些是協力廠商應用程式，而組織外部的。</span><span class="sxs-lookup"><span data-stu-id="19cb4-109">Normal remediation steps, like resetting passwords for breached accounts or requiring Multi-Factor Authentication (MFA) on accounts, are not effective against this type of attack, since these are third-party applications and are external to the organization.</span></span> <span data-ttu-id="19cb4-110">這些攻擊利用假定為呼叫資訊的實體是自動化，並不 human 互動模型。</span><span class="sxs-lookup"><span data-stu-id="19cb4-110">These attacks leverage an interaction model which presumes the entity that is calling the information is automation and not a human.</span></span>

## <a name="what-does-an-illicit-consent-grant-attack-look-like-in-office-365"></a><span data-ttu-id="19cb4-111">項目並未非法同意授與攻擊的外觀在 Office 365？</span><span class="sxs-lookup"><span data-stu-id="19cb4-111">What does an illicit consent grant attack look like in Office 365?</span></span>
<span data-ttu-id="19cb4-112">您要搜尋 Office 365**稽核記錄，** 以尋找符號，也稱為 「 標記的危害 (IOC) 這類攻擊。</span><span class="sxs-lookup"><span data-stu-id="19cb4-112">You need to search the Office 365 **audit log** to find signs, also called Indicators of Compromise (IOC) of this attack.</span></span> <span data-ttu-id="19cb4-113">對許多 Azure 註冊應用程式與大型使用者基底的組織而言，最佳作法是檢閱您的組織同意授與每週為基礎。</span><span class="sxs-lookup"><span data-stu-id="19cb4-113">For organizations with many Azure-registered applications and a large user base, the best practice is to review your organizations consent grants on a weekly basis.</span></span>
### <a name="steps-for-finding-signs-of-this-attack"></a><span data-ttu-id="19cb4-114">步驟來尋找此類攻擊的跡象</span><span class="sxs-lookup"><span data-stu-id="19cb4-114">Steps for finding signs of this attack</span></span>
1. <span data-ttu-id="19cb4-115">Office 365 租用戶中開啟的**安全性與合規性中心**。</span><span class="sxs-lookup"><span data-stu-id="19cb4-115">Open the **Security and Compliance Center** in your Office 365 tenant.</span></span>
2. <span data-ttu-id="19cb4-116">瀏覽至 [**搜尋 & 和調查**] 節點，然後選取 [**稽核記錄**搜尋。</span><span class="sxs-lookup"><span data-stu-id="19cb4-116">Navigate to the **Search & investigation** node and select **audit log** search.</span></span>
3. <span data-ttu-id="19cb4-117">建立 「 搜尋 」 （所有活動和所有的使用者） 篩選結果的同意，應用程式，並新增 OAuth2PermissionGrant。</span><span class="sxs-lookup"><span data-stu-id="19cb4-117">Create a search (all activities and all users) and filter the results for Consent to application, and Add OAuth2PermissionGrant.</span></span>
4. <span data-ttu-id="19cb4-118">檢查郵件的延伸內容並檢查看看是否 IsAdminContent 設為 True。</span><span class="sxs-lookup"><span data-stu-id="19cb4-118">Examine the Extended Properties and check to see if IsAdminContent is set to True.</span></span>


<span data-ttu-id="19cb4-119">如果此值為 true，就表示，以全域系統管理員存取權的人員可能會有廣泛存取權授與資料。</span><span class="sxs-lookup"><span data-stu-id="19cb4-119">If this value is true, it indicates that someone with Global Administrator access may have granted broad access to data.</span></span> <span data-ttu-id="19cb4-120">如果這是未預期，請執行下列步驟[確認攻擊](detect-and-remediate-illicit-consent-grants.md#confirmattack)。</span><span class="sxs-lookup"><span data-stu-id="19cb4-120">If this is unexpected, take steps to [confirm an attack](detect-and-remediate-illicit-consent-grants.md#confirmattack).</span></span>

<span data-ttu-id="19cb4-121"><a name="confirmattack"> </a></span><span class="sxs-lookup"><span data-stu-id="19cb4-121"></span></span>
## <a name="how-to-confirm-an-attack"></a><span data-ttu-id="19cb4-122">如何確認攻擊</span><span class="sxs-lookup"><span data-stu-id="19cb4-122">How to confirm an attack</span></span>
<span data-ttu-id="19cb4-123">如果您有一或多個執行個體的 IOCs 上述，您需要進行進一步調查正面確認 [攻擊的發生。</span><span class="sxs-lookup"><span data-stu-id="19cb4-123">If you have one or more instances of the IOCs  listed above, you need to do further investigation to positively confirm that the attack occurred.</span></span> <span data-ttu-id="19cb4-124">您可以使用任何下列三種方法來確認攻擊。</span><span class="sxs-lookup"><span data-stu-id="19cb4-124">You can use any of these three methods to confirm the attack.</span></span>
- <span data-ttu-id="19cb4-125">庫存應用程式並使用 Azure Active Directory 入口網站及其權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-125">Inventory applications and their permissions using the Azure Active Directory portal.</span></span> <span data-ttu-id="19cb4-126">這個方法是徹底，但您只能用來檢查一位使用者一次可以是相當耗時如果您有許多使用者檢查。</span><span class="sxs-lookup"><span data-stu-id="19cb4-126">This method is thorough, but you can only check one user at a time which can be very time consuming if you have many users to check.</span></span>
- <span data-ttu-id="19cb4-127">庫存應用程式並使用 PowerShell 及其權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-127">Inventory  applications and their permissions using PowerShell.</span></span> <span data-ttu-id="19cb4-128">這是最快和最完整的方法，以最少的額外負荷量。</span><span class="sxs-lookup"><span data-stu-id="19cb4-128">This is the fastest and most thorough method, with the least amount of overhead.</span></span>
- <span data-ttu-id="19cb4-129">讓使用者個別檢查其應用程式和權限，並將結果回報修復的管理員。</span><span class="sxs-lookup"><span data-stu-id="19cb4-129">Have your users individually check their apps and permissions and report the results back to the administrators for remediation.</span></span>

## <a name="inventory-apps-with-access-in-your-organization"></a><span data-ttu-id="19cb4-130">與您組織中存取的庫存應用程式</span><span class="sxs-lookup"><span data-stu-id="19cb4-130">Inventory apps with access in your organization</span></span>
<span data-ttu-id="19cb4-131">您可以這麼做為您的使用者與 Azure Active Directory 入口網站或 PowerShell，或讓使用者個別列舉其應用程式的存取。</span><span class="sxs-lookup"><span data-stu-id="19cb4-131">You can do this for your users with either the Azure Active Directory Portal, or PowerShell or have your users individually enumerate their application access.</span></span>

### <a name="steps-for-using-the-azure-active-directory-portal"></a><span data-ttu-id="19cb4-132">使用 Azure Active Directory 入口網站的步驟</span><span class="sxs-lookup"><span data-stu-id="19cb4-132">Steps for using the Azure Active Directory Portal</span></span>
<span data-ttu-id="19cb4-133">您可以查閱的任何個別的使用者已授與權限使用[Azure Active Directory 入口網站](https://portal.azure.com/)的應用程式。</span><span class="sxs-lookup"><span data-stu-id="19cb4-133">You can look up the applications to which any individual user has granted permissions by using the [Azure Active Directory Portal](https://portal.azure.com/).</span></span> 
1. <span data-ttu-id="19cb4-134">登入 Azure 入口網站，具有系統管理權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-134">Sign in to the Azure Portal with administrative rights.</span></span>
2. <span data-ttu-id="19cb4-135">選取 [Azure Active Directory] 刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="19cb4-135">Select the Azure Active Directory blade.</span></span>
3. <span data-ttu-id="19cb4-136">選取 [**使用者**]。</span><span class="sxs-lookup"><span data-stu-id="19cb4-136">Select **Users**.</span></span>
4. <span data-ttu-id="19cb4-137">選取您想要檢閱的使用者。</span><span class="sxs-lookup"><span data-stu-id="19cb4-137">Select the user that you want to review.</span></span>
5. <span data-ttu-id="19cb4-138">選取 [**應用程式**。</span><span class="sxs-lookup"><span data-stu-id="19cb4-138">Select **Applications**.</span></span>

<span data-ttu-id="19cb4-139">如此將會顯示指派給使用者和功能的應用程式 applcations 具有的權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-139">This will show you the apps that are assigned to the user and what permissions the applcations have.</span></span>

### <a name="steps-for-having-your-users-enumerate-their-application-access"></a><span data-ttu-id="19cb4-140">讓您的使用者的步驟列舉其應用程式的存取</span><span class="sxs-lookup"><span data-stu-id="19cb4-140">Steps for having your users enumerate their application access</span></span>
<span data-ttu-id="19cb4-141">讓使用者移至https://myapps.microsoft.com並檢閱那里自己的應用程式存取。</span><span class="sxs-lookup"><span data-stu-id="19cb4-141">Have your users go to https://myapps.microsoft.com and review their own application access there.</span></span> <span data-ttu-id="19cb4-142">他們應該可以看到具有存取權的所有應用程式，檢視它們 （包括的存取範圍） 的詳細資料，而且無法撤銷可疑或非法應用程式的權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-142">They should be able to see all the apps with access, view details about them (including the scope of access), and be able to revoke privileges to suspicious or illicit apps.</span></span>

### <a name="steps-for-doing-this-with-powershell"></a><span data-ttu-id="19cb4-143">執行此動作使用 PowerShell 的步驟</span><span class="sxs-lookup"><span data-stu-id="19cb4-143">Steps for doing this with PowerShell</span></span>
<span data-ttu-id="19cb4-144">若要確認非法同意授與攻擊的最簡單方式是執行[Get AzureADPSPermissions.ps1](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09)，這會將傾印所有 OAuth 同意授與和 OAuth 應用程式的所有使用者在您的租用成一個.csv 檔案。</span><span class="sxs-lookup"><span data-stu-id="19cb4-144">The simplest way to verify the Illicit Consent Grant attack is to run  [Get-AzureADPSPermissions.ps1](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09), which will dump all the OAuth consent grants and OAuth apps for all users in your tenancy into one .csv file.</span></span> 

#### <a name="pre-requisites"></a><span data-ttu-id="19cb4-145">先決條件</span><span class="sxs-lookup"><span data-stu-id="19cb4-145">Pre-requisites</span></span>
- <span data-ttu-id="19cb4-146">安裝 Azure AD PowerShell 程式庫。</span><span class="sxs-lookup"><span data-stu-id="19cb4-146">The Azure AD PowerShell library installed.</span></span>
- <span data-ttu-id="19cb4-147">指令碼會執行對租用戶的全域系統管理員權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-147">Global administrator rights on the tenant that the script will be run against.</span></span>
- <span data-ttu-id="19cb4-148">從其電腦上的本機系統管理員會執行指令碼。</span><span class="sxs-lookup"><span data-stu-id="19cb4-148">Local Administrator on the computer from which will run the scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="19cb4-149">我們強烈建議您在您的系統管理帳戶需要多重要素驗證。</span><span class="sxs-lookup"><span data-stu-id="19cb4-149">We highly recommend that you require multi-factor authentication on your administrative account.</span></span>  <span data-ttu-id="19cb4-150">此指令碼支援 MFA 驗證。</span><span class="sxs-lookup"><span data-stu-id="19cb4-150">This script supports MFA authentication.</span></span>

1. <span data-ttu-id="19cb4-151">登入您要執行的指令碼以本機系統管理員權限的電腦。</span><span class="sxs-lookup"><span data-stu-id="19cb4-151">Sign in to the computer that you will run the script from with local administrator rights.</span></span>
2. <span data-ttu-id="19cb4-152">下載或從 GitHub [Get AzureADPSPermissions.ps1](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09)指令碼複製到您要從中執行 scruipt 資料夾。</span><span class="sxs-lookup"><span data-stu-id="19cb4-152">Download or copy the [Get-AzureADPSPermissions.ps1](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09) script from GitHub to a folder from which you will run the scruipt.</span></span>  <span data-ttu-id="19cb4-153">這會將寫入輸出"permissions.csv 」 檔案的相同資料夾。</span><span class="sxs-lookup"><span data-stu-id="19cb4-153">This will be the same folder to which the output “permissions.csv” file will be written.</span></span>
3. <span data-ttu-id="19cb4-154">開啟身為系統管理員的 PowerShell 執行個體，然後開啟至您儲存指令碼的資料夾。</span><span class="sxs-lookup"><span data-stu-id="19cb4-154">Open a PowerShell instance as an administrator and open to the folder you saved the script to.</span></span>
4. <span data-ttu-id="19cb4-155">連線至您使用[Connect AzureAD](https://docs.microsoft.com/powershell/module/azuread/connect-azuread?view=azureadps-2.0)指令程式的目錄。</span><span class="sxs-lookup"><span data-stu-id="19cb4-155">Connect to your directory using the [Connect-AzureAD](https://docs.microsoft.com/powershell/module/azuread/connect-azuread?view=azureadps-2.0) cmdlet.</span></span>
5. <span data-ttu-id="19cb4-156">執行此 PowerShell 命令列如下所示：`Get-AzureADPSPermissions.ps1 | Export-csv -path "Permissions.csv" -NoTypeInformation`</span><span class="sxs-lookup"><span data-stu-id="19cb4-156">Run this PowerShell command line as follows: `Get-AzureADPSPermissions.ps1 | Export-csv -path "Permissions.csv" -NoTypeInformation`</span></span>

<span data-ttu-id="19cb4-157">指令碼會產生一個名為 Permissions.csv 的檔案。</span><span class="sxs-lookup"><span data-stu-id="19cb4-157">The script produces one file named Permissions.csv.</span></span> <span data-ttu-id="19cb4-158">請遵循下列步驟來尋找非法應用程式的權限授與：</span><span class="sxs-lookup"><span data-stu-id="19cb4-158">Follow these steps to look for illicit application permission grants:</span></span> 
1. <span data-ttu-id="19cb4-159">ConsentType 欄 （欄 G） 中搜尋 「 AllPrinciples 」 的值。</span><span class="sxs-lookup"><span data-stu-id="19cb4-159">In the ConsentType column (column G) search for the value “AllPrinciples”.</span></span> <span data-ttu-id="19cb4-160">AllPrincipals 權限可讓用戶端應用程式存取租用戶中的每個人的內容。</span><span class="sxs-lookup"><span data-stu-id="19cb4-160">The AllPrincipals permission allows the client application to access everyone’s content in the tenancy.</span></span> <span data-ttu-id="19cb4-161">原生 Office 365 應用程式需要此權限正常運作。</span><span class="sxs-lookup"><span data-stu-id="19cb4-161">Native Office 365 applications need this permission to work correctly.</span></span> <span data-ttu-id="19cb4-162">與此權限的每一個非 Microsoft 應用程式應該仔細檢閱。</span><span class="sxs-lookup"><span data-stu-id="19cb4-162">Every non-Microsoft application with this permission should be reviewed carefully.</span></span>
2.  <span data-ttu-id="19cb4-163">在權限] 欄 （F 欄） 檢閱每個委派應用程式的權限有內容。</span><span class="sxs-lookup"><span data-stu-id="19cb4-163">In the Permission column (column F) review the permissions that each delegated application has to content.</span></span> <span data-ttu-id="19cb4-164">尋找 「 讀取 」 及 「 寫入 」 權限或 「 \*。所有 「 權限，並檢閱這些仔細因為它們可能不是適當的。</span><span class="sxs-lookup"><span data-stu-id="19cb4-164">Look for “Read” and “Write” permission or “\*.All” permission, and review these carefully because they may not be appropriate.</span></span>
3.  <span data-ttu-id="19cb4-165">檢閱已同意授與特定使用者。</span><span class="sxs-lookup"><span data-stu-id="19cb4-165">Review the specific users that have consents granted.</span></span> <span data-ttu-id="19cb4-166">如果高設定檔] 或 [高影響使用者授與的不當同意，您應該在進一步調查。</span><span class="sxs-lookup"><span data-stu-id="19cb4-166">If high profile or high impact users have inappropriate consents granted, you should investigate further.</span></span>
4.  <span data-ttu-id="19cb4-167">ClientDisplayName 欄 （C 欄） 中看起來好像可疑的應用程式。</span><span class="sxs-lookup"><span data-stu-id="19cb4-167">In the ClientDisplayName column (column C) look for apps that seem suspicious.</span></span> <span data-ttu-id="19cb4-168">應該仔細檢閱應用程式的拼字錯誤的名稱、 super 乏味名稱或駭客發音名稱。</span><span class="sxs-lookup"><span data-stu-id="19cb4-168">Apps with misspelled names, super bland names, or hacker-sounding names should be reviewed carefully.</span></span>

## <a name="determine-the-scope-of-the-attack"></a><span data-ttu-id="19cb4-169">判斷攻擊的範圍</span><span class="sxs-lookup"><span data-stu-id="19cb4-169">Determine the scope of the attack</span></span>
<span data-ttu-id="19cb4-170">當您完成清查應用程式存取之後，請先檢閱 Office 365**稽核記錄**來判斷資料外洩的完整範圍。</span><span class="sxs-lookup"><span data-stu-id="19cb4-170">After you have finished inventorying application access, review the Office 365 **audit log** to determine the full scope of the breach.</span></span>  <span data-ttu-id="19cb4-171">搜尋受影響的使用者，在時間圖文框的非法應用程式具有存取您的組織，以及應用程式具有的權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-171">Search on the affected users, the time frames that the illicit application had access to your organization, and the permissions the app had.</span></span> <span data-ttu-id="19cb4-172">您可以搜尋**稽核記錄**中的[Microsoft 365 安全性與合規性中心](https://support.office.com/article/Search-the-audit-log-in-the-Office-365-Security-Compliance-Center-0d4d0f35-390b-4518-800e-0c7ec95e946c)。</span><span class="sxs-lookup"><span data-stu-id="19cb4-172">You can search the **audit log** in the [Microsoft 365 Security and Compliance Center](https://support.office.com/article/Search-the-audit-log-in-the-Office-365-Security-Compliance-Center-0d4d0f35-390b-4518-800e-0c7ec95e946c).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="19cb4-173">[信箱稽核](https://support.office.com/article/Enable-mailbox-auditing-in-Office-365-aaca8987-5b62-458b-9882-c28476a66918)和[活動的稽核系統管理員和使用者](https://support.office.com/article/turn-office-365-audit-log-search-on-or-off-e893b19a-660c-41f2-9074-d3631c95a014)必須已啟用之前，以取得這項資訊攻擊。</span><span class="sxs-lookup"><span data-stu-id="19cb4-173">[Mailbox auditing](https://support.office.com/article/Enable-mailbox-auditing-in-Office-365-aaca8987-5b62-458b-9882-c28476a66918) and [Activity auditing for admins and users](https://support.office.com/article/turn-office-365-audit-log-search-on-or-off-e893b19a-660c-41f2-9074-d3631c95a014) must have been enabled prior to the attack for you to get this information.</span></span>

## <a name="how-to-stop-and-remediate-an-illicit-consent-grant--attack"></a><span data-ttu-id="19cb4-174">如何停止並修復非法同意授與攻擊</span><span class="sxs-lookup"><span data-stu-id="19cb4-174">How to stop and remediate an illicit consent grant  attack</span></span>
<span data-ttu-id="19cb4-175">識別具有非法權限的應用程式之後，您會有幾種方式可以移除權限。</span><span class="sxs-lookup"><span data-stu-id="19cb4-175">After you have identified an application with illicit permissions, you have several ways to remove that access.</span></span>
- <span data-ttu-id="19cb4-176">您可以撤銷由 Azure Active Directory 入口網站中的應用程式的權限：</span><span class="sxs-lookup"><span data-stu-id="19cb4-176">You can revoke the application's permission in the Azure Active Directory Portal by:</span></span>
    - <span data-ttu-id="19cb4-177">瀏覽至 [ **Azure Active Directory 使用者**] 刀鋒視窗中的受影響使用者。</span><span class="sxs-lookup"><span data-stu-id="19cb4-177">Navigate to the affected user in the **Azure Active Directory User** blade.</span></span>
    - <span data-ttu-id="19cb4-178">選取 [**應用程式**。</span><span class="sxs-lookup"><span data-stu-id="19cb4-178">Select **Applications**.</span></span>
    - <span data-ttu-id="19cb4-179">選取非法應用程式。</span><span class="sxs-lookup"><span data-stu-id="19cb4-179">Select the illicit application.</span></span>
    - <span data-ttu-id="19cb4-180">按一下 [**移除**]，讓向下切入中。</span><span class="sxs-lookup"><span data-stu-id="19cb4-180">Click **Remove** in the drill down.</span></span>
- <span data-ttu-id="19cb4-181">您可以依照下列步驟中[移除 AzureADOAuth2PermissionGrant](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADOAuth2PermissionGrant?view=azureadps-2.0)撤銷 OAuth 同意授與使用 PowerShell。</span><span class="sxs-lookup"><span data-stu-id="19cb4-181">You can revoke the OAuth consent grant with PowerShell by following the steps in [Remove-AzureADOAuth2PermissionGrant](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADOAuth2PermissionGrant?view=azureadps-2.0).</span></span>
- <span data-ttu-id="19cb4-182">您可以依照下列步驟中[移除 AzureADServiceAppRoleAssignment](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADServiceAppRoleAssignment?view=azureadps-2.0)撤銷服務應用程式角色指派，使用 PowerShell。</span><span class="sxs-lookup"><span data-stu-id="19cb4-182">You can revoke the Service App Role Assignment with PowerShell by following the steps in [Remove-AzureADServiceAppRoleAssignment](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADServiceAppRoleAssignment?view=azureadps-2.0).</span></span>
- <span data-ttu-id="19cb4-183">您也可以停用受影響的帳戶完全，這會依次停用應用程式資料的存取權的帳戶中的登入。</span><span class="sxs-lookup"><span data-stu-id="19cb4-183">You can also disable sign-in for the affected account altogether, which will in turn disable app access to data in that account.</span></span> <span data-ttu-id="19cb4-184">這不適合使用者產能，當然，但如果您正在快速限制影響，它可以是可行的短期修復。</span><span class="sxs-lookup"><span data-stu-id="19cb4-184">This isn't ideal for the end user's productivity, of course, but if you are working to limit impact quickly, it can be a viable short-term remediation.</span></span>
- <span data-ttu-id="19cb4-185">您可以關閉整合式應用程式為您的租用。</span><span class="sxs-lookup"><span data-stu-id="19cb4-185">You can turn integrated applications off for your tenancy.</span></span> <span data-ttu-id="19cb4-186">這是極端的步驟，停用使用者授與同意全租用戶為基礎的能力。</span><span class="sxs-lookup"><span data-stu-id="19cb4-186">This is a drastic step that disables the ability for end users to grant consent on a tenant-wide basis.</span></span> <span data-ttu-id="19cb4-187">這可防止您的使用者不小心授與存取權的惡意的應用程式。</span><span class="sxs-lookup"><span data-stu-id="19cb4-187">This prevents your users from inadvertently granting access to a malicious application.</span></span> <span data-ttu-id="19cb4-188">這不建議您為嚴重會妨礙您的使用者即可發揮生產力與協力廠商應用程式。</span><span class="sxs-lookup"><span data-stu-id="19cb4-188">This isn't strongly recommended as it severely impairs your users' ability to be productive with third party applications.</span></span>  <span data-ttu-id="19cb4-189">您可以[開啟整合式應用程式](https://support.office.com/article/Turning-Integrated-Apps-on-or-off-7e453a40-66df-44ab-92a1-96786cb7fb34)中開啟或關閉的步驟。</span><span class="sxs-lookup"><span data-stu-id="19cb4-189">You can do this by following the steps in  [Turning Integrated Apps on or off](https://support.office.com/article/Turning-Integrated-Apps-on-or-off-7e453a40-66df-44ab-92a1-96786cb7fb34).</span></span>

## <a name="secure-office-365-like-a-cybersecurity-pro"></a><span data-ttu-id="19cb4-190">保護 Office 365 專業 cybersecurity 像</span><span class="sxs-lookup"><span data-stu-id="19cb4-190">Secure Office 365 like a cybersecurity pro</span></span>
<span data-ttu-id="19cb4-191">Office 365 訂閱隨附一組功能強大的安全性功能，可用來保護您的資料和您的使用者。</span><span class="sxs-lookup"><span data-stu-id="19cb4-191">Your Office 365 subscription comes with a powerful set of security capabilities that you can use to protect your data and your users.</span></span>  <span data-ttu-id="19cb4-192">使用[Office 365 安全性藍圖： 前的 30 天、 前 90 天及過後](https://support.office.com/article/office-365-security-roadmap-top-priorities-for-the-first-30-days-90-days-and-beyond-28c86a1c-e4dd-4aad-a2a6-c768a21cb352)實作 Microsoft 建議的最佳作法為保護您的 Office 365 租用戶。</span><span class="sxs-lookup"><span data-stu-id="19cb4-192">Use the [Office 365 security roadmap: Top priorities for the first 30 days, 90 days, and beyond](https://support.office.com/article/office-365-security-roadmap-top-priorities-for-the-first-30-days-90-days-and-beyond-28c86a1c-e4dd-4aad-a2a6-c768a21cb352) to implement Microsoft recommended best practices for securing your Office 365 tenant.</span></span>
- <span data-ttu-id="19cb4-193">若要在第一個 30 天內完成的工作。</span><span class="sxs-lookup"><span data-stu-id="19cb4-193">Tasks to accomplish in the first 30 days.</span></span>  <span data-ttu-id="19cb4-194">這些有直接影響，而低影響您的使用者。</span><span class="sxs-lookup"><span data-stu-id="19cb4-194">These have immediate affect and are low-impact to your users.</span></span>
- <span data-ttu-id="19cb4-195">若要在 90 天內完成的工作。</span><span class="sxs-lookup"><span data-stu-id="19cb4-195">Tasks to accomplish in 90 days.</span></span> <span data-ttu-id="19cb4-196">這些較多要花時間規劃及實作，但是大幅改善您的安全性狀態。</span><span class="sxs-lookup"><span data-stu-id="19cb4-196">These take a bit more time to plan and implement but greatly improve your security posture.</span></span>
- <span data-ttu-id="19cb4-197">超過 90 天。</span><span class="sxs-lookup"><span data-stu-id="19cb4-197">Beyond 90 days.</span></span> <span data-ttu-id="19cb4-198">這些增強功能建立您第一張 90 天的工作。</span><span class="sxs-lookup"><span data-stu-id="19cb4-198">These enhancements build in your first 90 days work.</span></span>

## <a name="see-also"></a><span data-ttu-id="19cb4-199">另請參閱：</span><span class="sxs-lookup"><span data-stu-id="19cb4-199">See also:</span></span>
- <span data-ttu-id="19cb4-200">[未預期的應用程式的應用程式] 清單中](https://docs.microsoft.com/azure/active-directory/application-access-unexpected-application)會逐步引導管理員透過各種動作，他們可能會想要採取之後實現有非預期的應用程式存取資料。</span><span class="sxs-lookup"><span data-stu-id="19cb4-200">[Unexpected application in my applications list](https://docs.microsoft.com/azure/active-directory/application-access-unexpected-application)  walks administrators through various actions they may want to take after realizing there are unexpected applications with access to data.</span></span>
- <span data-ttu-id="19cb4-201">[Azure Active directory 整合應用程式] (https://docs.microsoft.com/azure/active-directory/active-directory-apps-permissions-consent)是同意和權限的高階概觀。</span><span class="sxs-lookup"><span data-stu-id="19cb4-201">[Integrating applications with Azure Active Directory]  (https://docs.microsoft.com/azure/active-directory/active-directory-apps-permissions-consent)  is a high-level overview of consent and permissions.</span></span>  <span data-ttu-id="19cb4-202">請特別注意[同意架構概觀](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#overview-of-the-consent-framework)區段。</span><span class="sxs-lookup"><span data-stu-id="19cb4-202">Pay particular attention to the [Overview of the consent framework](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#overview-of-the-consent-framework) section.</span></span>
- <span data-ttu-id="19cb4-203">[問題開發我的應用程式](https://docs.microsoft.com/azure/active-directory/active-directory-application-dev-development-content-map)提供連結至各種同意相關的文章。</span><span class="sxs-lookup"><span data-stu-id="19cb4-203">[Problems developing my application](https://docs.microsoft.com/azure/active-directory/active-directory-application-dev-development-content-map) provides links to various consent related articles.</span></span>
- <span data-ttu-id="19cb4-204">[應用程式和 Azure Active Directory (Azure AD) 中的服務主體物件](https://docs.microsoft.com/azure/active-directory/develop/active-directory-application-objects)提供應用程式和服務主體物件的核心應用程式模型的概觀。</span><span class="sxs-lookup"><span data-stu-id="19cb4-204">[Application and service principal objects in Azure Active Directory (Azure AD)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-application-objects) provides an overview of the Application and Service principal objects that are core to the application model.</span></span>
- <span data-ttu-id="19cb4-205">[應用程式的管理存取](https://docs.microsoft.com/azure/active-directory/active-directory-managing-access-to-apps)是系統管理員具有管理應用程式的使用者存取的功能概觀。</span><span class="sxs-lookup"><span data-stu-id="19cb4-205">[Manage access to apps](https://docs.microsoft.com/azure/active-directory/active-directory-managing-access-to-apps) is an overview of the capabilities that administrators have to manage user access to apps.</span></span>
